<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å­¦å“æ•™è‚²å­¦é™¢ - è¯¾å ‚è¡¨ç°æŠ¥å‘Š</title>
  <style>
    :root{
      --bg:#f7f5eb;
      --card:#fffaf0;
      --line:#f0e4c2;
      --line2:#e6d7b0;
      --text:#444;
      --muted:#777;
      --brand:#b4761c;
      --brand2:#7a4f10;
      --btn:#f2b235;
      --btn2:#ddd0a9;
      --focus:#e3b04b;
    }

    *{ box-sizing:border-box; }

    body{
      font-family:-apple-system,BlinkMacSystemFont,"Microsoft YaHei",sans-serif;
      background:var(--bg);
      margin:0;
      padding:0;
      color:var(--text);
    }

    .container{
      max-width:1000px;
      margin:20px auto;
      background:#fff;
      padding:20px;
      border-radius:14px;
      box-shadow:0 4px 16px rgba(0,0,0,.08);
    }

    .page-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding-bottom:12px;
      border-bottom:2px solid var(--line);
      margin-bottom:16px;
    }
    .page-header-left{
      display:flex;
      align-items:center;
      gap:12px;
    }
    .page-logo{
      width:54px;
      height:54px;
      border-radius:12px;
      background:#fff;
      border:1px solid var(--line2);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .page-logo img{
      width:100%;
      height:100%;
      object-fit:contain;
    }
    .page-title{
      margin:0;
      font-size:18px;
      font-weight:800;
      color:var(--brand2);
      line-height:1.15;
    }
    .page-sub{
      margin:3px 0 0;
      font-size:12px;
      color:var(--muted);
    }

    .form-grid{
      display:grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap:18px;
      margin-top:14px;
    }
    @media (max-width: 860px){
      .form-grid{ grid-template-columns:1fr; }
    }

    .card{
      background:var(--card);
      border:1px solid var(--line2);
      border-radius:12px;
      padding:16px;
    }

    .card h2{
      font-size:15px;
      margin:0 0 10px;
      color:var(--brand);
      font-weight:800;
    }

    .field{ margin-bottom:10px; }
    label{
      display:block;
      font-size:14px;
      margin-bottom:4px;
      color:#555;
      font-weight:600;
    }

    input[type="text"], select, textarea{
      width:100%;
      padding:8px 10px;
      border-radius:10px;
      border:1px solid #ddd0a9;
      outline:none;
      background:#fffdf7;
      font-size:14px;
    }
    textarea{ min-height:100px; resize:vertical; }

    input[type="text"]:focus, select:focus, textarea:focus{
      border-color:var(--focus);
      box-shadow:0 0 0 2px rgba(227,176,75,.2);
    }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .row > div{ flex:1; min-width:180px; }

    .radio-row, .check-row{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      align-items:center;
      font-size:13px;
      color:#444;
    }
    .radio-row label, .check-row label{
      display:inline-flex;
      align-items:center;
      gap:6px;
      margin:0;
      font-weight:500;
      white-space:nowrap;
    }

    .hint{
      font-size:12px;
      color:#8c8c8c;
      margin-top:4px;
    }

    .btn-row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:8px;
    }
    button{
      border:none;
      border-radius:999px;
      padding:8px 14px;
      font-size:13px;
      cursor:pointer;
      background:var(--btn);
      color:#fff;
      font-weight:800;
      letter-spacing:.3px;
    }
    button.secondary{
      background:var(--btn2);
      color:#555;
    }
    button:hover{ filter:brightness(1.04); }

    .report-wrap{
      background:#fffdf6;
      border:1px solid var(--line);
      border-radius:14px;
      padding:14px;
    }

    .report-toolbar{
      display:flex;
      justify-content:flex-end;
      gap:10px;
      margin-bottom:10px;
    }

    .report-header{
      display:flex;
      align-items:center;
      gap:12px;
      padding:10px 12px;
      border:1px solid var(--line);
      background:#fffaf0;
      border-radius:12px;
      margin-bottom:12px;
    }

    .report-logo{
      width:58px;
      height:58px;
      border-radius:12px;
      border:1px solid var(--line2);
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex:0 0 auto;
    }
    .report-logo img{
      width:100%;
      height:100%;
      object-fit:contain;
    }

    .report-title{
      display:flex;
      flex-direction:column;
      gap:3px;
      line-height:1.1;
    }
    .report-title .main{
      font-size:16px;
      font-weight:900;
      color:var(--brand2);
    }
    .report-title .sub{
      font-size:14px;
      font-weight:800;
      color:var(--brand);
    }

    .section{
      padding:10px 10px;
      border-radius:12px;
      background:#fff;
      border:1px solid var(--line);
      margin-bottom:10px;
    }
    .section .sec-title{
      font-weight:900;
      color:var(--brand2);
      margin-bottom:8px;
      font-size:13px;
    }

    .kv{
      font-size:13px;
      color:#555;
      line-height:1.7;
    }
    .kv b{
      color:#8d6115;
      font-weight:900;
    }

    .comment-box{
      font-size:13px;
      line-height:1.75;
      color:#444;
      white-space:pre-wrap;
    }

    .photo-row{
      display:flex;
      align-items:flex-start;
      gap:12px;
      flex-wrap:wrap;
    }
    .photo-row img{
      width:150px;
      height:180px;
      object-fit:cover;
      border-radius:12px;
      border:1px solid var(--line2);
      background:#fff;
      display:none;
    }

    .slogan{
      margin-top:10px;
      padding-top:10px;
      border-top:1px dashed var(--line2);
      text-align:center;
      color:var(--brand);
      font-weight:900;
      font-size:13px;
    }

    body.screenshot-mode .page-header{ display:none; }
    body.screenshot-mode .form-grid{
      grid-template-columns:1fr;
    }
    body.screenshot-mode .form-grid > .card:first-child{
      display:none;
    }
    body.screenshot-mode .container{
      box-shadow:none;
      margin:0 auto;
      border-radius:0;
      max-width:900px;
    }
  </style>
</head>

<body>
  <div class="container">

    <div class="page-header">
      <div class="page-header-left">
        <div class="page-logo">
          <img src="xp-logo.png" alt="å­¦å“æ•™è‚²å­¦é™¢ Logo">
        </div>
        <div>
          <h1 class="page-title">è¯¾å ‚è¡¨ç°æŠ¥å‘Šåˆ¶ä½œï¼ˆè€å¸ˆå¡«å†™ï¼‰</h1>
          <p class="page-sub">å¡«å†™åå³ä¾§ä¼šç”Ÿæˆå¯ç›´æ¥æˆªå›¾å‘å®¶é•¿çš„æŠ¥å‘Šã€‚</p>
        </div>
      </div>
      <button type="button" class="secondary" onclick="toggleScreenshotMode()">å®¶é•¿æˆªå›¾æ¨¡å¼</button>
    </div>

    <div class="form-grid">

      <div class="card">
        <h2>âœï¸ è€å¸ˆå¡«å†™</h2>

        <div class="field">
          <label for="studentName">å­¦ç”Ÿåå­—ï¼š</label>
          <input type="text" id="studentName" placeholder="è¯·è¾“å…¥å­¦ç”Ÿåå­—">
        </div>

        <div class="row">
          <div class="field">
            <label for="grade">å¹´çº§ï¼š</label>
            <select id="grade">
              <option value="">è¯·é€‰æ‹©å¹´çº§</option>
              <option value="K2">K2</option>
              <option value="Y1">Y1</option>
              <option value="Y2">Y2</option>
              <option value="Y3">Y3</option>
              <option value="Y4">Y4</option>
              <option value="Y5">Y5</option>
              <option value="Y6">Y6</option>
            </select>
          </div>

          <div class="field">
            <label for="subject">ç§‘ç›®ï¼š</label>
            <select id="subject">
              <option value="">è¯·é€‰æ‹©ç§‘ç›®</option>
              <option value="å›½æ–‡ç†è§£">å›½æ–‡ç†è§£</option>
              <option value="å›½æ–‡ä½œæ–‡">å›½æ–‡ä½œæ–‡</option>
              <option value="è‹±æ–‡ç†è§£">è‹±æ–‡ç†è§£</option>
              <option value="è‹±æ–‡ä½œæ–‡">è‹±æ–‡ä½œæ–‡</option>
            </select>
          </div>
        </div>

        <div class="field">
          <label for="teacher">è€å¸ˆï¼š</label>
          <select id="teacher">
            <option value="">è¯·é€‰æ‹©è€å¸ˆ</option>
            <option value="å­”è€å¸ˆ">å­”è€å¸ˆ</option>
            <option value="Candyè€å¸ˆ">Candyè€å¸ˆ</option>
            <option value="Chloeè€å¸ˆ">Chloeè€å¸ˆ</option>
            <option value="é™ˆè€å¸ˆ">é™ˆè€å¸ˆ</option>
            <option value="æè€å¸ˆ">æè€å¸ˆ</option>
            <option value="ç‹è€å¸ˆ">ç‹è€å¸ˆ</option>
            <option value="Lucasè€å¸ˆ">Lucasè€å¸ˆ</option>
            <option value="Cherryè€å¸ˆ">Cherryè€å¸ˆ</option>
            <option value="æ™¶è€å¸ˆ">æ™¶è€å¸ˆ</option>
          </select>
        </div>

        <hr style="border:none;border-top:1px dashed var(--line2);margin:10px 0 12px;">

        <div class="field">
          <label>è¯¾å ‚è¡¨ç° Â· å­—ä½“ï¼š</label>
          <div class="radio-row">
            <label><input type="radio" name="font" value="ç«¯æ­£">ç«¯æ­£</label>
            <label><input type="radio" name="font" value="ä¸­ç­‰">ä¸­ç­‰</label>
            <label><input type="radio" name="font" value="æ½¦è‰">æ½¦è‰</label>
          </div>
        </div>

        <div class="field">
          <label>è¯¾å ‚è¡¨ç° Â· ä¸“å¿ƒåº¦ï¼š</label>
          <div class="radio-row">
            <label><input type="radio" name="focus" value="è®¤çœŸå¬è¯¾">è®¤çœŸå¬è¯¾</label>
            <label><input type="radio" name="focus" value="å¶å°”å‘å‘†">å¶å°”å‘å‘†</label>
            <label><input type="radio" name="focus" value="ä¸ä¸“å¿ƒ">ä¸ä¸“å¿ƒ</label>
          </div>
        </div>

        <div class="field">
          <label>ç­ä¸Šè¡¨ç°ï¼ˆå¯å¤šé€‰ï¼‰ï¼š</label>
          <div class="check-row">
            <label><input type="checkbox" name="behaviour" value="æ–‡é™">æ–‡é™</label>
            <label><input type="checkbox" name="behaviour" value="å¤šè¯">å¤šè¯</label>
            <label><input type="checkbox" name="behaviour" value="ç§¯æå›ç­”">ç§¯æå›ç­”</label>
            <label><input type="checkbox" name="behaviour" value="è¢«åŠ¨å­¦ä¹ ">è¢«åŠ¨å­¦ä¹ </label>
          </div>
          <div class="hint">å»ºè®®è‡³å°‘å‹¾é€‰ 1 é¡¹ï¼Œè®©å®¶é•¿æ›´æ¸…æ¥šå­©å­çš„è¯¾å ‚çŠ¶æ€ã€‚</div>
        </div>

        <hr style="border:none;border-top:1px dashed var(--line2);margin:10px 0 12px;">

        <div class="field">
          <label for="comment">è€å¸ˆç•™è¨€ï¼ˆå¯è‡ªåŠ¨ç”Ÿæˆï¼‰ï¼š</label>
          <textarea id="comment" placeholder="å¯ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è‡ªåŠ¨ç”Ÿæˆï¼Œæˆ–è‡ªè¡Œç¼–è¾‘ã€‚"></textarea>
          <div class="btn-row">
            <button type="button" onclick="generateComment()">è‡ªåŠ¨ç”Ÿæˆè€å¸ˆç•™è¨€</button>
            <button type="button" class="secondary" onclick="clearComment()">æ¸…ç©ºç•™è¨€</button>
          </div>
        </div>

        <div class="field">
          <label for="photo">ä¸Šä¼ å­¦ç”Ÿç…§ç‰‡ï¼š</label>
          <input type="file" id="photo" accept="image/*">
          <div class="hint">ä¸Šä¼ åä¼šæ˜¾ç¤ºåœ¨å³ä¾§æŠ¥å‘Šé‡Œï¼Œè®©æŠ¥å‘Šæ›´æœ‰æ¸©åº¦ ğŸ’›</div>
        </div>

        <div class="btn-row">
          <button type="button" onclick="updateReport()">æ›´æ–°å³ä¾§æŠ¥å‘Š</button>
        </div>
      </div>

      <div class="card">
        <div class="report-wrap" id="reportArea">

          <div class="report-toolbar">
            <button type="button" class="secondary" onclick="toggleScreenshotMode()">å®¶é•¿æˆªå›¾æ¨¡å¼</button>
          </div>

          <div class="report-header">
            <div class="report-logo">
              <img src="xp-logo.png" alt="å­¦å“æ•™è‚²å­¦é™¢ Logo">
            </div>
            <div class="report-title">
              <div class="main">å­¦å“æ•™è‚²å­¦é™¢</div>
              <div class="sub">è¯¾å ‚è¡¨ç°æŠ¥å‘Š</div>
            </div>
          </div>

          <div class="section">
            <div class="sec-title">åŸºæœ¬èµ„æ–™</div>
            <div class="kv">
              <b>å­¦ç”Ÿï¼š</b><span id="r-student">â€”â€”</span><br>
              <b>å¹´çº§ï¼š</b><span id="r-grade">â€”â€”</span><br>
              <b>ç§‘ç›®ï¼š</b><span id="r-subject">â€”â€”</span><br>
              <b>ä»»è¯¾è€å¸ˆï¼š</b><span id="r-teacher">â€”â€”</span>
            </div>
          </div>

          <div class="section">
            <div class="sec-title">è¯¾å ‚è¡¨ç°</div>
            <div class="kv">
              <b>å­—ä½“ï¼š</b><span id="r-font">â€”â€”</span><br>
              <b>ä¸“å¿ƒåº¦ï¼š</b><span id="r-focus">â€”â€”</span><br>
              <b>ç­ä¸Šè¡¨ç°ï¼š</b><span id="r-behaviour">â€”â€”</span>
            </div>
          </div>

          <div class="section">
            <div class="sec-title">è€å¸ˆç•™è¨€</div>
            <div class="comment-box" id="r-comment">ï¼ˆè€å¸ˆç•™è¨€å°†æ˜¾ç¤ºåœ¨è¿™é‡Œï¼‰</div>
          </div>

          <div class="section">
            <div class="sec-title">å­¦ç”Ÿç…§ç‰‡</div>
            <div class="photo-row">
              <img id="r-photo" alt="">
            </div>
          </div>

          <div class="slogan">
            å­¦å“æ•™è‚²å­¦é™¢ ç™¾ä¸‡é•‡ç¬¬ä¸€åçš„è¡¥ä¹ å­¦é™¢ æ³¨é‡å­©å­ä»¬çš„å­¦ä¹ è¿›åº¦
          </div>

        </div>
      </div>

    </div>
  </div>

  <script>
    function getSelectedRadio(name){
      const el = document.querySelector('input[name="' + name + '"]:checked');
      return el ? el.value : "";
    }
    function getCheckedValues(name){
      return Array.from(document.querySelectorAll('input[name="' + name + '"]:checked')).map(x => x.value);
    }
    function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    function generateComment(){
      const student = (document.getElementById("studentName").value.trim() || "å­©å­");
      const grade = document.getElementById("grade").value.trim();
      const subject = (document.getElementById("subject").value.trim() || "è¯¾å ‚");
      const font = getSelectedRadio("font");
      const focus = getSelectedRadio("focus");
      const behaviours = getCheckedValues("behaviour");

      const open_good = [
        `${grade ? grade + "çš„" : ""}${student}åœ¨${subject}çš„å­¦ä¹ æ€åº¦è‰¯å¥½ï¼Œæ•´ä½“è¡¨ç°ä¸é”™ã€‚`,
        `${student}åœ¨${subject}è¯¾ä¸ŠæŠ•å…¥åº¦ä½³ï¼Œè€å¸ˆçœ‹è§å­©å­çš„åŠªåŠ›ã€‚`,
        `åœ¨${subject}æ–¹é¢ï¼Œ${student}æ•´ä½“è¡¨ç°ç¨³å®šï¼Œå­¦ä¹ æ€åº¦å€¼å¾—è‚¯å®šã€‚`
      ];
      const open_neutral = [
        `${grade ? grade + "çš„" : ""}${student}åœ¨${subject}æ–¹é¢è¿˜æœ‰æå‡ç©ºé—´ï¼Œè€å¸ˆä¼šç»§ç»­é™ªä¼´å¼•å¯¼ã€‚`,
        `${student}åœ¨${subject}è¯¾å ‚ä¸Šçš„è¡¨ç°ä¸­è§„ä¸­çŸ©ï¼Œè‹¥èƒ½å†è°ƒæ•´å­¦ä¹ ä¹ æƒ¯ä¼šæ›´å¥½ã€‚`,
        `åœ¨${subject}å­¦ä¹ ä¸Šï¼Œ${student}éœ€è¦å†å¤šä¸€ç‚¹ç¨³å®šä¸ä¸“æ³¨ã€‚`
      ];

      let opening = (focus === "è®¤çœŸå¬è¯¾") ? pick(open_good) : pick(open_neutral);

      let focusSentence = "";
      if (focus === "è®¤çœŸå¬è¯¾"){
        focusSentence = pick([
          `ä¸Šè¯¾æ—¶èƒ½å¤Ÿä¸“å¿ƒè†å¬ä¸è·Ÿä¸Šæ•™å­¦èŠ‚å¥ï¼Œå®Œæˆä»»åŠ¡ä¹Ÿè¾ƒåˆ°ä½ã€‚`,
          `è¯¾å ‚ä¸Šå¤§éƒ¨åˆ†æ—¶é—´éƒ½èƒ½ä¿æŒä¸“æ³¨ï¼Œå¯¹è€å¸ˆæé—®ä¹Ÿæœ‰ç•™æ„ã€‚`,
          `èƒ½å¤Ÿä¸“å¿ƒå¬è¯¾ï¼Œå¹¶æ„¿æ„é…åˆè€å¸ˆçš„è¯¾å ‚å®‰æ’ã€‚`
        ]);
      } else if (focus === "å¶å°”å‘å‘†"){
        focusSentence = pick([
          `ä¸Šè¯¾æ—¶å¶å°”ä¼šåˆ†å¿ƒæˆ–å‘å‘†ï¼Œéœ€è¦è€å¸ˆé€‚æ—¶æé†’ã€‚`,
          `æ³¨æ„åŠ›æœ‰æ—¶ä¼šé£˜èµ°ï¼Œè‹¥èƒ½å†ä¸“æ³¨ä¸€ç‚¹ï¼Œå­¦ä¹ æ•ˆæœä¼šæ›´å¥½ã€‚`,
          `è¯¾å ‚ä¸“æ³¨åº¦æ—¶å¥½æ—¶åï¼Œå»ºè®®ç»§ç»­åŠ å¼ºä¸“æ³¨ä¹ æƒ¯ã€‚`
        ]);
      } else if (focus === "ä¸ä¸“å¿ƒ"){
        focusSentence = pick([
          `ç›®å‰è¯¾å ‚ä¸“æ³¨åº¦åä½ï¼Œè¾ƒå®¹æ˜“åˆ†å¿ƒï¼Œå»ºè®®åŠ å¼ºè‡ªå¾‹ä¸å¬è¯¾ä¹ æƒ¯ã€‚`,
          `ä¸Šè¯¾æ—¶å¸¸å‡ºç°ä¸ä¸“å¿ƒçš„æƒ…å†µï¼Œå½±å“å­¦ä¹ å¸æ”¶ï¼Œè€å¸ˆä¼šç»§ç»­å¼•å¯¼æ”¹å–„ã€‚`,
          `è¯¾å ‚ä¸Šè¾ƒéš¾æŒç»­ä¸“æ³¨ï¼Œè‹¥èƒ½å…ˆæŠŠå¿ƒæ€æ”¾åœ¨å­¦ä¹ ä¸Šï¼Œè¿›æ­¥ä¼šæ›´æ˜æ˜¾ã€‚`
        ]);
      } else {
        focusSentence = `è¯¾å ‚ä¸“æ³¨åº¦å°šæœªé€‰æ‹©ï¼Œè€å¸ˆå»ºè®®æŒç»­åŸ¹å…»ä¸“æ³¨å¬è¯¾çš„ä¹ æƒ¯ã€‚`;
      }

      let fontSentence = "";
      if (font === "ç«¯æ­£"){
        fontSentence = pick([
          `ä¹¦å†™å­—ä½“ç«¯æ­£æ¸…æ™°ï¼Œæ˜¯å¾ˆå¥½çš„å­¦ä¹ ä¹ æƒ¯ï¼Œè¯·ç»§ç»­ä¿æŒã€‚`,
          `å†™å­—æ•´é½æ˜“è¯»ï¼Œèƒ½å¸®åŠ©æ£€æŸ¥ä½œä¸šä¸å»ºç«‹è‰¯å¥½å­¦ä¹ æ€åº¦ã€‚`,
          `å­—ä½“å·¥æ•´ï¼Œç»†èŠ‚åšå¾—ä¸é”™ï¼Œå€¼å¾—ç§°èµã€‚`
        ]);
      } else if (font === "ä¸­ç­‰"){
        fontSentence = pick([
          `ä¹¦å†™åŸºæœ¬æ¸…æ¥šï¼Œè‹¥èƒ½æ”¾æ…¢é€Ÿåº¦å¹¶æ³¨æ„é—´è·ï¼Œä¼šæ›´æ•´é½ç¾è§‚ã€‚`,
          `å­—ä½“å±äºä¸­ç­‰æ°´å¹³ï¼Œå»ºè®®å†åŠ å¼ºç¬”ç”»æ¸…æ™°ä¸æ•´é½åº¦ã€‚`,
          `å†™å­—å°šå¯ï¼Œå¦‚æ›´æœ‰è€å¿ƒåœ°ä¹¦å†™ï¼Œæ•´ä½“ä¼šæ›´å¥½çœ‹ã€‚`
        ]);
      } else if (font === "æ½¦è‰"){
        fontSentence = pick([
          `ä¹¦å†™è¾ƒæ½¦è‰ï¼Œå»ºè®®æ”¾æ…¢é€Ÿåº¦ï¼ŒæŠŠæ¯ä¸ªå­—å†™å®Œæ•´å†™æ¸…æ¥šã€‚`,
          `å­—ä½“ç•¥æ˜¾å‡Œä¹±ï¼Œå¸Œæœ›å­©å­å¤šç»ƒä¹ ä¹¦å†™å¹¶æå‡æ•´é½åº¦ã€‚`,
          `å†™å­—ä¹ æƒ¯éœ€è¦åŠ å¼ºï¼Œè‹¥æ›´ä¸“å¿ƒä¹¦å†™ï¼Œä¼šè®©ä½œä¸šæ›´æ¸…æ™°ã€‚`
        ]);
      } else {
        fontSentence = `ä¹¦å†™è¡¨ç°å°šæœªé€‰æ‹©ï¼Œè€å¸ˆå»ºè®®ç»§ç»­åŸ¹å…»è®¤çœŸä¹¦å†™çš„ä¹ æƒ¯ã€‚`;
      }

      let behaviourSentence = "";
      if (behaviours.length){
        const list = behaviours.join("ã€");
        let extra = "";
        if (behaviours.includes("ç§¯æå›ç­”")) extra += "æ„¿æ„ä¸¾æ‰‹å›ç­”ï¼Œè¡¨è¾¾èƒ½åŠ›ä¸é”™ï¼›";
        if (behaviours.includes("æ–‡é™")) extra += "æ€§æ ¼è¾ƒæ–‡é™ï¼Œå»ºè®®å¤šå¼€å£å‘é—®ä¸åˆ†äº«ï¼›";
        if (behaviours.includes("å¤šè¯")) extra += "æœ‰æ—¶ä¼šå’ŒåŒå­¦èŠå¤©ï¼Œéœ€æé†’åœ¨è¯¾å ‚ä¿æŒä¸“æ³¨ï¼›";
        if (behaviours.includes("è¢«åŠ¨å­¦ä¹ ")) extra += "è¯¾å ‚å‚ä¸åº¦åè¢«åŠ¨ï¼Œéœ€è¦æ›´å¤šé¼“åŠ±ä¸å¸¦åŠ¨ï¼›";

        behaviourSentence = `åœ¨ç­ä¸Šçš„è¡¨ç°åå‘ã€Œ${list}ã€ï¼Œ${extra ? "è€å¸ˆè§‚å¯Ÿåˆ°ï¼š" + extra : ""}`;
      }

      let closing = "";
      if (focus === "è®¤çœŸå¬è¯¾" && !behaviours.includes("è¢«åŠ¨å­¦ä¹ ")){
        closing = pick([
          `åªè¦ç»§ç»­ä¿æŒè¿™æ ·çš„æ€åº¦å¹¶å¤šåšç»ƒä¹ ï¼Œç›¸ä¿¡ä¼šæœ‰æ›´äº®çœ¼çš„è¿›æ­¥ã€‚`,
          `è€å¸ˆä¼šç»§ç»­é¼“åŠ±ä¸é™ªä¼´ï¼ŒæœŸå¾…å­©å­è¶Šæ¥è¶Šç¨³å®šã€è¶Šæ¥è¶Šè‡ªä¿¡ã€‚`,
          `ç»§ç»­ä¿æŒè®¤çœŸå­¦ä¹ çš„èŠ‚å¥ï¼Œæˆæœä¸€å®šä¼šè¶Šæ¥è¶Šå¥½ã€‚`
        ]);
      } else {
        closing = pick([
          `åªè¦æ„¿æ„ä¸€æ­¥ä¸€æ­¥è°ƒæ•´ä¹ æƒ¯ï¼Œåœ¨è€å¸ˆå’Œå®¶é•¿çš„é™ªä¼´ä¸‹ï¼Œå­©å­ä¸€å®šå¯ä»¥è¶Šå­¦è¶Šå¥½ã€‚`,
          `è€å¸ˆä¼šç»§ç»­è€å¿ƒå¼•å¯¼ï¼Œä¹Ÿæ¬¢è¿å®¶é•¿åœ¨å®¶ä¸€èµ·é…åˆï¼Œå¸®åŠ©å­©å­å»ºç«‹æ›´å¥½çš„å­¦ä¹ ä¹ æƒ¯ã€‚`,
          `å¸Œæœ›æ¥ä¸‹æ¥å­©å­å¤šä¸€ç‚¹ä¸“æ³¨ä¸å‹‡æ°”ï¼Œç›¸ä¿¡å­©å­æœ‰èƒ½åŠ›åšå¾—æ›´å¥½ã€‚`
        ]);
      }

      const full = [opening, focusSentence, fontSentence, behaviourSentence, closing].filter(Boolean).join(" ");
      document.getElementById("comment").value = full;
      updateReport();
    }

    function clearComment(){
      document.getElementById("comment").value = "";
      document.getElementById("r-comment").innerText = "ï¼ˆè€å¸ˆç•™è¨€å°†æ˜¾ç¤ºåœ¨è¿™é‡Œï¼‰";
    }

    function updateReport(){
      const student = document.getElementById("studentName").value.trim() || "â€”â€”";
      const grade = document.getElementById("grade").value || "â€”â€”";
      const subject = document.getElementById("subject").value || "â€”â€”";
      const teacher = document.getElementById("teacher").value || "â€”â€”";

      const font = getSelectedRadio("font") || "â€”â€”";
      const focus = getSelectedRadio("focus") || "â€”â€”";
      const behaviours = getCheckedValues("behaviour");
      const behaviourText = behaviours.length ? behaviours.join("ã€") : "â€”â€”";

      const comment = document.getElementById("comment").value.trim() || "ï¼ˆè€å¸ˆç•™è¨€å°†æ˜¾ç¤ºåœ¨è¿™é‡Œï¼‰";

      document.getElementById("r-student").innerText = student;
      document.getElementById("r-grade").innerText = grade;
      document.getElementById("r-subject").innerText = subject;
      document.getElementById("r-teacher").innerText = teacher;

      document.getElementById("r-font").innerText = font;
      document.getElementById("r-focus").innerText = focus;
      document.getElementById("r-behaviour").innerText = behaviourText;

      document.getElementById("r-comment").innerText = comment;
    }

    document.getElementById("photo").addEventListener("change", function(e){
      const file = e.target.files[0];
      const img = document.getElementById("r-photo");
      if(!file){
        img.style.display="none";
        img.src="";
        return;
      }
      const reader = new FileReader();
      reader.onload = function(ev){
        img.src = ev.target.result;
        img.style.display = "block";
      };
      reader.readAsDataURL(file);
    });

    function toggleScreenshotMode(){
      document.body.classList.toggle("screenshot-mode");
    }
  </script>
</body>
</html>
